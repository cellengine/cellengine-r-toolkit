<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Get FCS File Events — getEvents • cellengine</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Get FCS File Events — getEvents"><meta property="og:description" content="Retrieves events from an FCS file or gated population as either an FCS or
TSV file. Optionally transfers directly to S3-compatible storage."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cellengine</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get FCS File Events</h1>

    <div class="hidden name"><code>getEvents.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Retrieves events from an FCS file or gated population as either an FCS or
TSV file. Optionally transfers directly to S3-compatible storage.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getEvents</span><span class="op">(</span></span>
<span>  <span class="va">experimentId</span>,</span>
<span>  <span class="va">fcsFileId</span>,</span>
<span>  populationId <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  compensation <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  compensatedQ <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  headerQ <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  format <span class="op">=</span> <span class="st">"FCS"</span>,</span>
<span>  destination <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  subsampling <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  addEventNumber <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-experimentid">experimentId<a class="anchor" aria-label="anchor" href="#arg-experimentid"></a></dt>
<dd><p>ID of experiment or a <code>byName</code> expression.</p></dd>


<dt id="arg-fcsfileid">fcsFileId<a class="anchor" aria-label="anchor" href="#arg-fcsfileid"></a></dt>
<dd><p>ID of FCS file or a <code>byName</code> expression.</p></dd>


<dt id="arg-populationid">populationId<a class="anchor" aria-label="anchor" href="#arg-populationid"></a></dt>
<dd><p>Optional ID of population or a <code>byName</code> expression,
for gated events.</p></dd>


<dt id="arg-compensation">compensation<a class="anchor" aria-label="anchor" href="#arg-compensation"></a></dt>
<dd><p>ID of compensation or special compensation type
(<code>UNCOMPENSATED</code> or <code>FILE_INTERNAL</code>) to use for gating. This
should generally match what you used to create your gates. Not required if
<code>compensatedQ</code> is <code>FALSE</code> and exporting ungated files.</p></dd>


<dt id="arg-compensatedq">compensatedQ<a class="anchor" aria-label="anchor" href="#arg-compensatedq"></a></dt>
<dd><p>If <code>TRUE</code>, applies the compensation specified in
compensation to the exported events. For TSV format, the numerical values
will be the compensated values. For FCS format, the numerical values will
be unchanged, but the file header will contain the compensation as the
spill string (file-internal compensation).</p></dd>


<dt id="arg-headerq">headerQ<a class="anchor" aria-label="anchor" href="#arg-headerq"></a></dt>
<dd><p>for TSV format only: if true, file will contain a header row.</p></dd>


<dt id="arg-format">format<a class="anchor" aria-label="anchor" href="#arg-format"></a></dt>
<dd><p>One of "TSV" or "FCS".</p></dd>


<dt id="arg-destination">destination<a class="anchor" aria-label="anchor" href="#arg-destination"></a></dt>
<dd><p>Optional destination for the file.</p>
<p>If omitted, the result will be returned as a binary blob (if <code>format</code>
is "FCS") or a data.frame (if <code>format</code> is "TSV").</p>
<p>If a string, the result will be written to disk.</p>
<p>If a <code>list</code> with a <code>host</code> value, transfer the file to
S3-compatible storage. S3 transfers occur "in the cloud," directly from
CellEngine to the S3 provider, without transferring the file to your local
computer. S3 transfer specifications accept the following:</p>
<ul><li><p><code>host</code> Required. The full S3 host, including the bucket and
region as applicable. For example, for AWS, this would look like
<code>"mybucket.s3.us-east-2.amazonaws.com"</code>.</p><div class="sourceCode"><pre><code>\item \code{path} The path prefix for the object. This is concatenated
  directly with the file name. Use a trailing "/" to specify a
  "directory" in S3. For example, if the path is \code{"/Study001/"} and
  the file is called \code{"Specimen01.fcs"}, the object key will be
  \code{"/Study001/Specimen01.fcs"}. Use no trailing slash to specify a
  file prefix. For example, if the path is \code{"/transfer1_"}, the
  object key will be \code{"/transfer1_Specimen01.fcs"}. Note that S3
  object keys must start with "/"; a path of "" will result in an
  \code{Invalid URI} response. Defaults to "/".

\item \code{accessKey} Required for private buckets. The S3 access key.
  Must be associated with an account with appropriate S3 permissions
  (e.g. \code{PutObject}).

\item \code{secretKey} Required for private buckets. The S3 secret key.

\item \code{headers} Custom headers to include in the S3 request. Common
  examples are \code{x-amz-storage-class}/\code{x-goog-storage-class} and
  \code{x-amz-server-side-encryption}. Some headers, such as
  \code{Content-Length}, \code{Content-MD5} and \code{Content-Type},
  cannot be modified. Refer to https://docs.aws.amazon.com/AmazonS3/latest/API/API_PutObject.html
  for AWS header documentation and https://cloud.google.com/storage/docs/migrating#custommeta
  regarding compatibility with Google Cloud Platform.
</code></pre></div></li>
</ul></dd>


<dt id="arg-overwrite">overwrite<a class="anchor" aria-label="anchor" href="#arg-overwrite"></a></dt>
<dd><p>Optional, if a destination is a string, allows destination
file to be overwritten.</p></dd>


<dt id="arg-subsampling">subsampling<a class="anchor" aria-label="anchor" href="#arg-subsampling"></a></dt>
<dd><p>Optional, subsampling parameters in the form
<code>list(preSubsampleN = number, preSubsampleP = number,
  postSubsampleN = number, postSubsampleP = number, seed = number)</code>.
Subsample-N options specify absolute subsampling values, and subsample-P
options specify a fractional subsampling value (0 to 1); specify only one
pre- and/or one post-subsample option. Specify a <code>seed</code> for
reproducible downsampling.</p></dd>


<dt id="arg-addeventnumber">addEventNumber<a class="anchor" aria-label="anchor" href="#arg-addeventnumber"></a></dt>
<dd><p>Optional. Add an event number column to the exported
file. When a <code>populationId</code> is specified (when gating), this number
corresponds to the index of the event in the original file.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>Tip: FCS files are more compact than TSV files. Use that format for faster
downloads. Use a library such as flowCore to parse FCS files.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Returns the FCS file as a binary blob (requires parsing before use):</span></span></span>
<span class="r-in"><span><span class="fu">getEvents</span><span class="op">(</span><span class="va">experimentId</span>, <span class="va">fcsFileId</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Returns a data.frame:</span></span></span>
<span class="r-in"><span><span class="fu">getEvents</span><span class="op">(</span><span class="va">experimentId</span>, <span class="va">fcsFileId</span>, <span class="va">populationId</span>, format <span class="op">=</span> <span class="st">"TSV"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Saves as an FCS file to disk:</span></span></span>
<span class="r-in"><span><span class="fu">getEvents</span><span class="op">(</span><span class="va">experimentId</span>, <span class="va">fcsFileId</span>, destination <span class="op">=</span> <span class="st">"/path/to/output.fcs"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Saves as a TSV file to disk:</span></span></span>
<span class="r-in"><span><span class="fu">getEvents</span><span class="op">(</span><span class="va">experimentId</span>, <span class="va">fcsFileId</span>, destination <span class="op">=</span> <span class="st">"/path/to/output.tsv"</span>, format <span class="op">=</span> <span class="st">"TSV"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Subsamples and gates to only contain events in the specified population:</span></span></span>
<span class="r-in"><span><span class="va">subsampling</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>preSubsampleN <span class="op">=</span> <span class="fl">5000</span>, seed <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">getEvents</span><span class="op">(</span><span class="va">experimentId</span>, <span class="va">fcsFileId</span>, <span class="va">populationId</span>, subsampling <span class="op">=</span> <span class="va">subsampling</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Zach Bjornson, Gerrit Egnew.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

